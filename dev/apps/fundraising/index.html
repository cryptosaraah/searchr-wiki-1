<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Searchr">
        <link rel="canonical" href="https://squidfunk.github.io/mkdocs-material/dev/apps/fundraising/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Fundraising - Searchr</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../stylesheets/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-XXXXXXXX-X', 'auto');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../..">Searchr</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../documentation/whitepaper/">Whitepaper</a>
</li>
                            
<li >
    <a href="../../../documentation/aragonOS/">aragonOS</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Governance</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../documentation/Community_Governance_Model/">AGP2 - Community Governance Model</a>
</li>
            
<li >
    <a href="../../../documentation/Migration_to_Open_Source_Messaging_Platform/">AGP5 - Migration to Open Source Messaging Platform</a>
</li>
            
<li >
    <a href="../../../documentation/Merge_Aragon_HQ_and_Community_meetings/">AGP7 - Merge Aragon HQ and Community meetings</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Multisigs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../documentation/multisigs/overview/">Overview</a>
</li>
            
<li >
    <a href="../../../documentation/multisigs/foundation/">Foundation</a>
</li>
            
<li >
    <a href="../../../documentation/multisigs/community/">Community</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../../../documentation/Development_Plan/">Development Plan</a>
</li>
                            
<li >
    <a href="../../../documentation/Code_of_Conduct/">Aragon Code of Conduct</a>
</li>
                            
<li >
    <a href="../../../documentation/presentations/">Presentations</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Audit reports</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../documentation/audits/audit01_report_dossa/">Audit 01 by Adam Dossa</a>
</li>
            
<li >
    <a href="../../../documentation/audits/audit_internal_sun/">Audit (Internal) by Brett Sun</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../../../documentation/community_content/">Community Content</a>
</li>
                            
<li >
    <a href="../../../projects/">Third-party Projects</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../">Overview</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">aragonOS</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../aragonOS_index/">Overview</a>
</li>
            
<li >
    <a href="../../aragonOS_how_to_contribute/">How to contribute</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Aragon Apps</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../">Overview</a>
</li>
            
<li >
    <a href="../voting/">Voting</a>
</li>
            
<li >
    <a href="../token-manager/">Token Manager</a>
</li>
            
<li >
    <a href="../group/">Group</a>
</li>
            
<li class="active">
    <a href="./">Fundraising</a>
</li>
            
<li >
    <a href="../vault/">Vault</a>
</li>
            
<li >
    <a href="../finance/">Finance</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../design/">Overview</a>
</li>
                            
<li >
    <a href="../../../design/logo/">Logo</a>
</li>
                            
<li >
    <a href="../../../design/artwork/">Artwork</a>
</li>
                            
<li >
    <a href="../../../design/identity_guidelines/">Identity Guidelines</a>
</li>
                            
<li >
    <a href="../../../design/branding_proposal/">Branding Proposal</a>
</li>
                            
<li >
    <a href="../../../design/merch/">Merchandise</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Meetings <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Community</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Community 08</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../meetings/community/08/">Agenda</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/alexa/">Write-Up - Alexa</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/brett/">Write-Up - Brett</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/john/">Write-Up - John</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/jorge/">Write-Up - Jorge</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/luis/">Write-Up - Luis</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/luke/">Write-Up - Luke</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/maria/">Write-Up - Maria</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/oliver/">Write-Up - Oliver</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/pierre/">Write-Up - Pierre</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm08/tatu/">Write-Up - Tatu</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Community 07</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../meetings/community/07/">Agenda</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/alexa/">Write-Up - Alexa</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/brett/">Write-Up - Brett</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/light-cm07/">Write-Up - John</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/jorge/">Write-Up - Jorge</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/luis/">Write-Up - Luis</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/luke/">Write-Up - Luke</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/maria/">Write-Up - Maria</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/oliver/">Write-Up - Oliver</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/pierre/">Write-Up - Pierre</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm07/tatu/">Write-Up - Tatu</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Community 06</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../meetings/community/06/">Agenda</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/brett/">Write-Up - Brett</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/john/">Write-Up - John</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/jorge/">Write-Up - Jorge</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/luis/">Write-Up - Luis</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/luke/">Write-Up - Luke</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/maria/">Write-Up - Maria</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/oliver/">Write-Up - Oliver</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/pierre/">Write-Up - Pierre</a>
</li>
            
<li >
    <a href="../../../meetings/community/write-ups/cm06/tatu/">Write-Up - Tatu</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../../meetings/community/05/">Community 05</a>
</li>
            
<li >
    <a href="../../../meetings/community/04/">Community 04</a>
</li>
            
<li >
    <a href="../../../meetings/community/03/">Community 03</a>
</li>
            
<li >
    <a href="../../../meetings/community/02/">Community 02</a>
</li>
            
<li >
    <a href="../../../meetings/community/01/">Community 01</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Jobs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../jobs/">Overview</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Openings</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../jobs/openings/solidity/">EVM/Solidity Engineer</a>
</li>
            
<li >
    <a href="../../../jobs/openings/frontend/">Frontend and web3 Developer</a>
</li>
            
<li >
    <a href="../../../jobs/openings/dev_rel/">Developer Relations</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog posts <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../blog/2018/">2018</a>
</li>
                            
<li >
    <a href="../../../blog/2017/">2017</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Videos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../videos/tutorials/">Tutorials</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Meetings</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../videos/community/">Community</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../../../videos/interviews/">Interviews</a>
</li>
                            
<li >
    <a href="../../../videos/presentations/">Presentations</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Press <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../press/press-kit/">Press Kit</a>
</li>
                            
<li >
    <a href="../../../press/media-mentions/">Media Mentions</a>
</li>
                            
<li >
    <a href="../../../press/contact/">Contact</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Aragon Nest <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../nest/">Overview</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Guides</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../nest/guides/guide_for_submitting_a_proposal_for_grants/">Guide for submitting a Proposal for a grant</a>
</li>
            
<li >
    <a href="../../../nest/guides/guide_for_submitting_a_request_for_funding/">Guide for submitting a new Request for funding</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Templates</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../nest/templates/ISSUE_TEMPLATE/">New Issue Template</a>
</li>
            
<li >
    <a href="../../../nest/templates/PULL_REQUEST_TEMPLATE/">New Pull Request Template</a>
</li>
            
<li >
    <a href="../../../nest/templates/team/">team.md Template</a>
</li>
            
<li >
    <a href="../../../nest/templates/roadmap/">roadmap.md Template</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../../../nest/faqs/">FAQ</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Archive <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Documentation</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../archive/documentation/agp5/RocketChat/">AGP5 - Rocket Chat comparison</a>
</li>
            
<li >
    <a href="../../../archive/documentation/agp5/Riot/">AGP5 - Riot comparison</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Meetings</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Aragon HQ</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../archive/meetings/hq/01/">HQ 01</a>
</li>
            
<li >
    <a href="../../../archive/meetings/hq/02/">HQ 02</a>
</li>
            
<li >
    <a href="../../../archive/meetings/hq/03/">HQ 03</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Dev</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../archive/meetings/dev/01/">Dev 01</a>
</li>
            
<li >
    <a href="../../../archive/meetings/dev/02/">Dev 02</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Videos</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Meetings</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../archive/videos/hq/">Aragon HQ</a>
</li>
            
<li >
    <a href="../../../archive/videos/dev/">Dev</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Translations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Espa√±ol (Spanish)</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../translations/spanish/">Hola</a>
</li>
            
<li >
    <a href="../../../translations/spanish/aragonos/">aragonOS</a>
</li>
            
<li >
    <a href="../../../translations/spanish/devplan/">Development Plan</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../group/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../vault/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/shaunnarayan/edit/master/docs/dev/apps/fundraising.md">Edit on shaunnarayan/searchr-wiki</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#fundraising">Fundraising</a></li>
            <li><a href="#dependencies-and-permissions">Dependencies and permissions</a></li>
            <li><a href="#definitions">Definitions</a></li>
            <li><a href="#sale-lifecycle">Sale lifecycle</a></li>
            <li><a href="#limitations">Limitations</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="fundraising"><a href="https://github.com/aragon/aragon-apps/tree/master/apps/fundraising">Fundraising</a><a class="headerlink" href="#fundraising" title="Permanent link">&para;</a></h1>
<p><em><strong>Code in Github:</strong></em> <a href="https://github.com/aragon/aragon-apps/tree/master/apps/fundraising">aragon-apps/apps/fundraising</a></p>
<p>The Fundraising app allows to sell organization's tokens in return for other tokens. The sales that can be performed are simple capped sales with variable pricing over time. By tweaking some parameters, different sale dynamics can be achieved.</p>
<p>More complex sale types can be implemented as 3rd party applications.</p>
<h3 id="dependencies-and-permissions">Dependencies and permissions<a class="headerlink" href="#dependencies-and-permissions" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Token Manager</code>: On initialization it requires a reference to a <code>Token Manager</code> instance. One fundraising app instance is only able to 'sell' the underlying token managed by its <code>Token Manager</code>. <strong>The fundraising app must be granted permissions to mint tokens on the Token Manager</strong>. The Token Manager must have been initialized in <code>Native mode</code> so it can arbitrarily mint new tokens (See <a href="../token-manager/">Token Manager spec</a>).</p>
</li>
<li>
<p><code>Vault</code>: A reference to a <code>vault</code> is also required on initialization. However, there is no direct interaction with the vault, it is just used as the address where sale proceeds are deposited (vanilla ERC20 transfers).</p>
</li>
</ul>
<p>Both parameters are not modifiable after initialization.</p>
<h3 id="definitions">Definitions<a class="headerlink" href="#definitions" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Inverse pricing</strong>: Given that there is no native support for floating point numbers in Solidity, we need to introduce the concept of inverse pricing to allow for prices that are below 1. Token decimals must be taken into account when setting prices.</p>
<ul>
<li>When inverse pricing is <code>false</code> in a sale, price means how many input tokens must be payed for each token being bought. That means the amount of tokens bought is calculated as <code>boughtTokens = payedTokens / price</code>.</li>
<li>When inverse pricing is <code>true</code>, price means how many bought tokens are acquired per input token. <code>boughtTokens = payedTokens * price</code></li>
</ul>
</li>
<li>
<p><strong>Price periods</strong>:</p>
<ul>
<li>A sale will go through one or multiple periods during its lifecycle.</li>
<li>Periods determine what the price is at any given moment during the sale.</li>
<li>A period starts at the same timestamp when the previous period ended (or in the case of the first one, when the sale starts).</li>
<li>A period has an initial and final price. If they are not the same, price for a given timestamp is linearly interpolated in function of time.</li>
<li>Sales can have up to 50 periods.</li>
</ul>
</li>
</ul>
<p><img alt="" src="../rsc/fundraising_periods.png" /></p>
<ul>
<li><strong>Caps</strong>: By default all sales are capped on two aspects, uncapping a sale can be done by setting it to a very large number. Setting one or both caps to UINT256_MAX should be interpreted by the client as being uncapped on that aspect.<ul>
<li><strong>Max raised</strong>: Maximum amount of the token being raised that one sale accepts.</li>
<li><strong>Max sold</strong>: Maximum amount of tokens a sale can sell (max tokens minted).</li>
</ul>
</li>
</ul>
<h3 id="sale-lifecycle">Sale lifecycle<a class="headerlink" href="#sale-lifecycle" title="Permanent link">&para;</a></h3>
<h4 id="creation">Creation<a class="headerlink" href="#creation" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>fundraising.newSale(...)
</pre></div>


<p>All sale parameters are set on initialization and cannot be changed. After a sale has been created, there is the option to force closing the sale (requires permissions).</p>
<p>Sale parameters:</p>
<ul>
<li>Investor: Address of the entity allowed to buy in the sale. If the provided address is the 0th address (<code>0x0000...</code>), then the sale is considered public and any address can buy.</li>
<li>Raised token: Address of the token used for buy in the sale.</li>
<li>Maximum raised: As explained in caps section.</li>
<li>Maximum sold: As explained in caps section.</li>
<li>Minimum buy: Minimum amount of raised token for a valid purchase.</li>
<li>Is inverse price: Whether sale prices are expressed as inverse or not (as explained above).</li>
<li>Sale start time: Timestamp for the start of the first period.</li>
<li>Period ends array: Array of timestamps when each period ends (Minimum 1).</li>
<li>Prices array: Array of prices for periods. Even though each period has two values, it is a one dimensional array. Example: <code>[2, 3, 3, 5]</code> means Period 1(<code>initial price</code> = 2, <code>final price</code> = 3) and Period 2 (<code>initial price</code> = 3, <code>final price</code> = 5)</li>
</ul>
<h4 id="buy">Buy<a class="headerlink" href="#buy" title="Permanent link">&para;</a></h4>
<p>On every buy, the contract will calculate the price for the current timestamp based on the sale periods.</p>
<ul>
<li>
<p>If a given buy results in the sale capping (either maxRaised or maxSold), the contract will refund the buyer the amount contributed over the cap and the sale is closed.</p>
</li>
<li>
<p>After every individual buy, all funds are sent to the vault. The fundraising contract should never have funds in between buys.</p>
</li>
</ul>
<h5 id="buy-entrypoints">Buy entrypoints<a class="headerlink" href="#buy-entrypoints" title="Permanent link">&para;</a></h5>
<p>Two methods are allowed for buying in sales:</p>
<h6 id="erc20">ERC20<a class="headerlink" href="#erc20" title="Permanent link">&para;</a></h6>
<div class="codehilite"><pre><span></span>fundraising.transferAndBuy(uint256 saleId, uint256 payedTokens)
</pre></div>


<p>Requires the sender to have already created an ERC20 allowance equal or greater than <code>payedTokens</code> (could actually be less in the scenario some tokens are not allowed for cap reasons).</p>
<h6 id="erc677">ERC677<a class="headerlink" href="#erc677" title="Permanent link">&para;</a></h6>
<div class="codehilite"><pre><span></span>fundraising.buyTokens(uint256 saleId) // called by token
</pre></div>


<p>Requires the sender to make a <code>transferAndCall()</code> as in the <a href="https://github.com/ethereum/EIPs/issues/677">ERC677 standard</a> (still evolving and being discussed), setting the fundraising app as receiver and adding the correct data payload.</p>
<p>Raising ether can be done by setting the raised token to an EtherToken (ideally the one used by the <a href="../finance/">Finance app</a> for discoverability). Given that aragonOS' EtherToken implementation conforms to ERC677, buying with ether can be done by wrapping the ether using <code>etherToken.wrap()</code> and then doing a <code>transferAndCall(...)</code> or using the shortcut <code>wrapAndCall(...)</code> which performs both actions.</p>
<p>Please note that this section is subject to change as the <a href="https://github.com/ethereum/EIPs/issues/677">ERC677 discussion</a> evolves.</p>
<h4 id="closing-sale">Closing sale<a class="headerlink" href="#closing-sale" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>fundraising.closeSale(uint256 _saleId)
</pre></div>


<p>The sale is automatically closed either when a cap is reached or when the last period of the sale is over.</p>
<p>Attempting to buy in a closed sale will fail.</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<ul>
<li>There is no concept of non-successful sale for lack of funding, therefore there are no refunds.</li>
<li>In private sales, only one investor can buy. Whitelist sales are not supported.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2016 - 2018 Searchr</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        <script src="../../../javascript/extra_js.js"></script>
        <script src="../../../search/require.js"></script>
        <script src="../../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
